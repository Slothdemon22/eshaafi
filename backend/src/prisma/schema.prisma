enum Role {
  PATIENT
  DOCTOR
  ADMIN
}

model User {
  id       Int      @id @default(autoincrement())
  name     String
  email    String   @unique
  password String
  role     Role     @default(PATIENT)

  doctor   Doctor?
  bookings Booking[] @relation("PatientBookings")
}

model Doctor {
  id         Int               @id @default(autoincrement())
  location   String
  specialty  String
  userId     Int               @unique
  user       User              @relation(fields: [userId], references: [id])
  bookings   Booking[]         @relation("DoctorBookings")
  slots      AvailabilitySlot[] // Doctor's available time slots
}

model AvailabilitySlot {
  id        Int      @id @default(autoincrement())
  doctorId  Int
  dayOfWeek String    // e.g., "Monday", "Tue"
  startTime DateTime
  endTime   DateTime

  doctor    Doctor   @relation(fields: [doctorId], references: [id])
}

enum BookingStatus {
  PENDING
  BOOKED
  REJECTED
  COMPLETED
}

model Booking {
  id        Int           @id @default(autoincrement())
  dateTime  DateTime
  doctorId  Int
  patientId Int
  status    BookingStatus @default(PENDING)

  doctor    Doctor        @relation("DoctorBookings", fields: [doctorId], references: [id])
  patient   User          @relation("PatientBookings", fields: [patientId], references: [id])
}
